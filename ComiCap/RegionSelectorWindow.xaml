<Window x:Class="ComiCap.RegionSelectorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="領域選択"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        WindowState="Maximized"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Cursor="Cross"
        MouseDown="Window_MouseDown"
        MouseMove="Window_MouseMove"
        MouseUp="Window_MouseUp"
        KeyDown="Window_KeyDown">
    <Grid>
        <!-- 半透明の背景オーバーレイ -->
        <Canvas x:Name="OverlayCanvas" Background="#80000000" />

        <!-- 選択領域の表示用キャンバス -->
        <Canvas x:Name="SelectionCanvas">
            <!-- 選択領域のクリア部分（透明） -->
            <Rectangle x:Name="SelectionRectangle"
                       Visibility="Collapsed"
                       Fill="Transparent"
                       Stroke="Red"
                       StrokeThickness="2"
                       StrokeDashArray="5,3" />

            <!-- リサイズハンドル（8箇所） -->
            <Ellipse x:Name="HandleTopLeft" Width="10" Height="10" Fill="Red" Visibility="Collapsed" Cursor="SizeNWSE" MouseDown="Handle_MouseDown" />
            <Ellipse x:Name="HandleTopCenter" Width="10" Height="10" Fill="Red" Visibility="Collapsed" Cursor="SizeNS" MouseDown="Handle_MouseDown" />
            <Ellipse x:Name="HandleTopRight" Width="10" Height="10" Fill="Red" Visibility="Collapsed" Cursor="SizeNESW" MouseDown="Handle_MouseDown" />
            <Ellipse x:Name="HandleMiddleLeft" Width="10" Height="10" Fill="Red" Visibility="Collapsed" Cursor="SizeWE" MouseDown="Handle_MouseDown" />
            <Ellipse x:Name="HandleMiddleRight" Width="10" Height="10" Fill="Red" Visibility="Collapsed" Cursor="SizeWE" MouseDown="Handle_MouseDown" />
            <Ellipse x:Name="HandleBottomLeft" Width="10" Height="10" Fill="Red" Visibility="Collapsed" Cursor="SizeNESW" MouseDown="Handle_MouseDown" />
            <Ellipse x:Name="HandleBottomCenter" Width="10" Height="10" Fill="Red" Visibility="Collapsed" Cursor="SizeNS" MouseDown="Handle_MouseDown" />
            <Ellipse x:Name="HandleBottomRight" Width="10" Height="10" Fill="Red" Visibility="Collapsed" Cursor="SizeNWSE" MouseDown="Handle_MouseDown" />
        </Canvas>

        <!-- スピードボタンツールバー -->
        <StackPanel x:Name="ToolbarPanel"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Margin="0,10,0,0"
                    Background="#CC333333">
            <Button x:Name="FullScreenCaptureButton"
                    Content="全画面キャプチャ (F)"
                    Padding="10,5"
                    Margin="5"
                    Click="FullScreenCaptureButton_Click"
                    ToolTip="画面全体をキャプチャします (F)" />
            <Button x:Name="RegionCaptureButton"
                    Content="選択範囲キャプチャ (Enter)"
                    Padding="10,5"
                    Margin="5"
                    Click="RegionCaptureButton_Click"
                    IsEnabled="False"
                    ToolTip="選択した領域をキャプチャします (Enter)" />
            <Button x:Name="SaveButton"
                    Content="保存 (Ctrl+S)"
                    Padding="10,5"
                    Margin="5"
                    Click="SaveButton_Click"
                    IsEnabled="False"
                    ToolTip="選択した領域をファイルに保存します (Ctrl+S)" />
            <Button x:Name="CancelButton"
                    Content="キャンセル (Esc)"
                    Padding="10,5"
                    Margin="5"
                    Click="CancelButton_Click"
                    ToolTip="領域選択をキャンセルします (Esc)" />
        </StackPanel>
    </Grid>
</Window>
